[gd_scene load_steps=6 format=3 uid="uid://c8ym8xcmblvhj"]

[ext_resource type="Texture2D" uid="uid://bx7mx2anmx4qx" path="res://assets/espada 1.png" id="2_ft47r"]

[sub_resource type="GDScript" id="GDScript_k8eib"]
script/source = "class_name Sword
extends Node2D


# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(_delta):
	#var mouse_pisition = get_global_mouse_position()
	##look_at(get_global_mouse_position())
	#if mouse_pisition.x < 0:
		#self.rotation = -20
	look_at(get_global_mouse_position())
#	var mouse_position = get_global_mouse_position()
#	var player_position = get_parent().position
#
#
#
#	if mouse_position.x < player_position.x:
#
#		$Sprite2D.flip_h
#		$Sprite2D.scale.y = -0.05
#	else:
#		$Sprite2D.scale.y = 0.05
	

#func flip():
#	var direction = look_at(get_parent().position)
#	if direction < 0:
#		player_sprite.set_flip_h(true)
#	else:
#		player_sprite.set_flip_h(false)
#
#	emit_signal(\"player_direction\", !player_sprite.flip_h)
"

[sub_resource type="GDScript" id="GDScript_lwq4o"]
script/source = "class_name SwordHitBox
extends Area2D

@export
var sword : Sword
@export
var sword_collision_shape : SwordCollisionShape
@export
var damage : int = 1

func _init():
	collision_layer = 4
	collision_mask = 0

#func _ready():
#	sword.connect(\"player_direction\", _on_player_direction_changed)
#
#func _on_player_direction_changed(facing_right : bool):
#	if facing_right:
#		sword_collision_shape.position = sword_collision_shape.right_direction
#	else :
#		sword_collision_shape.position = sword_collision_shape.left_direction
"

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_kvn5c"]
radius = 5.40658
height = 32.0496

[sub_resource type="GDScript" id="GDScript_mytm4"]
script/source = "class_name SwordCollisionShape
extends CollisionShape2D

@export
var right_direction : Vector2
@export
var left_direction : Vector2

# Called when the node enters the scene tree for the first time.
func _ready():
	disabled = true


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(_delta):
	pass
"

[node name="Sword" type="Node2D"]
script = SubResource("GDScript_k8eib")

[node name="Sprite2D" type="Sprite2D" parent="."]
scale = Vector2(0.05, 0.05)
texture = ExtResource("2_ft47r")
offset = Vector2(60, -245)
region_filter_clip_enabled = true

[node name="SwordHitBox" type="Area2D" parent="Sprite2D" node_paths=PackedStringArray("sword", "sword_collision_shape")]
scale = Vector2(20, 20)
collision_layer = 4
collision_mask = 0
script = SubResource("GDScript_lwq4o")
sword = NodePath("../..")
sword_collision_shape = NodePath("SwordCollisionShape")

[node name="SwordCollisionShape" type="CollisionShape2D" parent="Sprite2D/SwordHitBox"]
position = Vector2(8.66667, -8.66667)
rotation = 0.804597
shape = SubResource("CapsuleShape2D_kvn5c")
script = SubResource("GDScript_mytm4")
right_direction = Vector2(17.5, 0)
left_direction = Vector2(-17.5, 0)
